---
title: TrendPublish - AI å†…å®¹å·¥å‚æµæ°´çº¿æ·±åº¦ç²¾è¯»
source: https://github.com/OpenAISpace/ai-trend-publish
author: OpenAISpace
date: 2026-01-25
category: ai-tools
subcategory: case-study
tags: [Deno, TypeScript, LLM, Embedding, å¾®ä¿¡å…¬ä¼—å·, å†…å®¹è‡ªåŠ¨åŒ–, å·¥ä½œæµå¼•æ“]
type: practical-project
---

# TrendPublishï¼šä¸€å¥—å®Œæ•´çš„ AI å†…å®¹å·¥å‚æµæ°´çº¿

> ğŸ”— é¡¹ç›®ï¼š[ai-trend-publish](https://github.com/OpenAISpace/ai-trend-publish)
> ğŸ“… å­¦ä¹ æ—¥æœŸï¼š2026-01-25
> ğŸ·ï¸ åˆ†ç±»ï¼šai-tools / case-study
> â­ æŠ€æœ¯æ ˆï¼šDeno + TypeScript + Drizzle ORM + EJS + å¤š LLM

---

## å¿«é€Ÿä¸Šæ‰‹å®è·µ

### 1. å®‰è£…æ–¹å¼

**Dockerï¼ˆæ¨èï¼‰**ï¼š
```bash
git clone https://github.com/OpenAISpace/ai-trend-publish.git
cd ai-trend-publish
cp .env.example .env   # ç¼–è¾‘å¡«å…¥ API Key
docker compose up -d
```

**æœ¬åœ°å¼€å‘ï¼ˆDeno 2.xï¼‰**ï¼š
```bash
curl -fsSL https://deno.land/install.sh | sh
git clone https://github.com/OpenAISpace/ai-trend-publish.git
cd ai-trend-publish && cp .env.example .env
deno task dev   # çƒ­é‡è½½å¼€å‘
```

### 2. æ ¸å¿ƒä½¿ç”¨æµç¨‹

```
â‘  å®šæ—¶è§¦å‘ï¼ˆå‡Œæ™¨3:00ï¼‰æˆ– API æ‰‹åŠ¨è§¦å‘
       â”‚
       â–¼
â‘¡ å¤šæºé‡‡é›†ï¼ˆå¹¶è¡Œï¼‰
   Twitter(X) / FireCrawl(ç½‘ç«™) / HelloGitHub(å¼€æºé¡¹ç›®)
       â”‚
       â–¼
â‘¢ AI å†…å®¹æ’åºï¼ˆLLM 5ç»´è¯„åˆ† + Embedding å»é‡ï¼‰
       â”‚
       â–¼
â‘£ AI æ‘˜è¦ç”Ÿæˆï¼ˆæ‰©å†™æ¶¦è‰² + æ ‡é¢˜ + å…³é”®è¯ï¼‰
       â”‚
       â–¼
â‘¤ å°é¢å›¾ç”Ÿæˆï¼ˆé˜¿é‡Œä¸‡è±¡ AI ç»˜å›¾ï¼‰
       â”‚
       â–¼
â‘¥ EJS æ¨¡æ¿æ¸²æŸ“ â†’ å¾®ä¿¡å…¬ä¼—å· HTML
       â”‚
       â–¼
â‘¦ å‘å¸ƒåˆ°å¾®ä¿¡å…¬ä¼—å·è‰ç¨¿ç®± â†’ äººå·¥å®¡æ ¸åå‘å¸ƒ
       â”‚
       â–¼
â‘§ å¤šæ¸ é“é€šçŸ¥ï¼ˆBark / é’‰é’‰ / é£ä¹¦ï¼‰
```

### 3. å…³é”®ç¯å¢ƒå˜é‡

| æ¨¡å— | å¿…å¡«å˜é‡ | ç”¨é€” |
|------|---------|------|
| LLM | `LLM_API_KEY`, `LLM_API_ENDPOINT`, `LLM_MODEL` | AI æ¨ç† |
| å¾®ä¿¡ | `WEIXIN_APP_ID`, `WEIXIN_APP_SECRET` | å…¬ä¼—å·å‘å¸ƒ |
| Twitter | `X_API_BEARER_TOKEN` | æ¨æ–‡é‡‡é›†ï¼ˆä½¿ç”¨ twitterapi.io ä»£ç†ï¼‰ |
| FireCrawl | `FIRECRAWL_API_KEY` | ç½‘é¡µæŠ“å– |
| Embedding | `DASHSCOPE_API_KEY` | å‘é‡ç›¸ä¼¼åº¦å»é‡ |
| å°é¢å›¾ | `WANX_API_KEY` | AI ç”Ÿæˆå°é¢ |
| é€šçŸ¥ | `BARK_URL` / `DINGTALK_WEBHOOK` / `FEISHU_WEBHOOK` | å¯é€‰ |

### 4. API æ‰‹åŠ¨è§¦å‘

```bash
curl -X POST http://localhost:8000/api/workflow \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{"jsonrpc":"2.0","method":"triggerWorkflow","params":{"type":"weixin_article"},"id":1}'
```

---

## æ ¹èŠ‚ç‚¹å‘½é¢˜

> **ã€Œå†…å®¹å·¥å‚æµæ°´çº¿ã€ = æ ‡å‡†åŒ–æ¥å£ + å¯æ’æ‹”æ¨¡å— + å·¥ä½œæµç¼–æ’**

å°†"äººå·¥è¿½è¸ªä¿¡æ¯ â†’ ç­›é€‰ â†’ åŠ å·¥ â†’ å‘å¸ƒ"çš„å®Œæ•´åª’ä½“è¿è¥é“¾æ¡ï¼ŒæŠ½è±¡ä¸ºä¸€æ¡å·¥ä¸šåŒ–ç”Ÿäº§æµæ°´çº¿ï¼Œæ¯ä¸ªç¯èŠ‚æ˜¯ä¸€ä¸ªå¯æ›¿æ¢çš„æ ‡å‡†åŒ–æ¨¡å—ã€‚

**ä¸ºä»€ä¹ˆè¿™æ˜¯æ ¹èŠ‚ç‚¹**ï¼šé¡¹ç›®çš„æ¯ä¸€ä¸ªè®¾è®¡å†³ç­–éƒ½ä»è¿™é‡Œæ¨å¯¼â€”â€”
- `ContentScraper` / `ContentPublisher` æ¥å£ â†’ æ ‡å‡†åŒ–æ¥å£
- `Workflow` åŸºç±»ç®¡ç†æ­¥éª¤ â†’ å·¥ä½œæµç¼–æ’
- LLM å·¥å‚æ¨¡å¼ â†’ å¯æ’æ‹”æ¨¡å—
- Prompt ç‹¬ç«‹åˆ° `prompts/` ç›®å½• â†’ æ˜“å˜é€»è¾‘ä¸ç¨³å®šæ¡†æ¶åˆ†ç¦»

---

## è¡¨ç¤ºç©ºé—´

| ç»´åº¦ | å«ä¹‰ | æœ¬é¡¹ç›®çš„é€‰æ‹© | æ›¿ä»£æ–¹æ¡ˆ |
|------|------|-------------|---------|
| æ•°æ®æºæŠ½è±¡ | å¦‚ä½•ä»ä¸åŒå¹³å°è·å–å†…å®¹ | `ContentScraper` æ¥å£ + å¤šå®ç° | RSS èšåˆã€API ç½‘å…³ |
| æ™ºèƒ½å¤„ç†ç®¡çº¿ | AI å¦‚ä½•å¤„ç†åŸå§‹å†…å®¹ | LLM æ’åº + Embedding å»é‡ + LLM æ‘˜è¦ | RAGã€Agentã€è§„åˆ™å¼•æ“ |
| è¾“å‡ºæ¸ é“ | å†…å®¹å‘å¸ƒåˆ°å“ªé‡Œ | å¾®ä¿¡å…¬ä¼—å·ï¼ˆEJS + APIï¼‰ | Telegramã€é‚®ä»¶ã€åšå®¢ |
| ç¼–æ’æœºåˆ¶ | å¦‚ä½•ä¸²è”å„ç¯èŠ‚ | Workflow æ­¥éª¤é“¾ + Cron å®šæ—¶ | DAG å¼•æ“ã€äº‹ä»¶é©±åŠ¨ |
| é…ç½®ç®¡ç† | å¦‚ä½•ç®¡ç†å¤šæºé…ç½® | ConfigManagerï¼ˆEnv + DBï¼‰ | Vaultã€é…ç½®ä¸­å¿ƒ |

---

## æ¶æ„åˆ†æ

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ | é€‰æ‹©ç†ç”± |
|------|----------|----------|
| è¿è¡Œæ—¶ | Deno 2.x | TS åŸç”Ÿã€æƒé™å®‰å…¨ã€å†…ç½®å·¥å…·é“¾ |
| ORM | Drizzle | è½»é‡ã€ç±»å‹å®‰å…¨ã€æ”¯æŒ SQLite |
| æ¨¡æ¿ | EJS | ç®€å•ç›´æ¥ã€å¾®ä¿¡å…¬ä¼—å· HTML æ¸²æŸ“ |
| LLM | OpenAI Compatible API | å¤šæ¨¡å‹å·¥å‚æ¨¡å¼ï¼ˆDeepSeek/Qwen/è®¯é£ï¼‰ |
| Embedding | é˜¿é‡Œäº‘ DashScope | ä¸­æ–‡å‘é‡åŒ–æ•ˆæœå¥½ |
| å›¾ç‰‡ç”Ÿæˆ | é˜¿é‡Œä¸‡è±¡ | å°é¢å›¾ AI ç”Ÿæˆ |
| è°ƒåº¦ | Deno.cron | å†…ç½®æ— éœ€é¢å¤–ä¾èµ– |
| API | JSON-RPC | è½»é‡ã€æ ‡å‡†åŒ– |

### æ ¸å¿ƒè®¾è®¡æ¨¡å¼

**1. æ¥å£éš”ç¦» + ç­–ç•¥æ¨¡å¼**
```typescript
// ç»Ÿä¸€æ¥å£
interface ContentScraper {
  scrape(sourceId: string, options?: ScraperOptions): Promise<ScrapedContent[]>;
}
// å¤šå®ç°ï¼šTwitterScraper / FireCrawlScraper / HelloGitHubScraper / JinaScraper
```

**2. å·¥å‚æ¨¡å¼ï¼ˆLLMï¼‰**
```typescript
// llm-factory.ts
class LLMFactory {
  static create(provider: string): LLMProvider {
    // æ ¹æ®é…ç½®åˆ›å»ºä¸åŒ LLM å®¢æˆ·ç«¯
  }
}
```

**3. æ­¥éª¤é“¾æ¨¡å¼ï¼ˆWorkflowï¼‰**
```typescript
workflow
  .addStep("é‡‡é›†", scrapeAll)
  .addStep("æ’åº", rankContents)
  .addStep("æ‘˜è¦", summarize)
  .addStep("æ¸²æŸ“", render)
  .addStep("å‘å¸ƒ", publish)
  .execute();
```

**4. å¤šæºé…ç½® + ä¼˜å…ˆçº§é“¾**
```typescript
// ConfigManager: Env(ä¼˜å…ˆçº§ä½) â†’ DB(ä¼˜å…ˆçº§é«˜)
configManager.addSource(new EnvConfigSource());   // å…œåº•
configManager.addSource(new DbConfigSource());    // è¦†ç›–
```

---

## æ¨è®ºå±•å¼€

```
æ ¹èŠ‚ç‚¹ï¼šå†…å®¹å·¥å‚æµæ°´çº¿ = æ ‡å‡†åŒ–æ¥å£ + å¯æ’æ‹”æ¨¡å— + å·¥ä½œæµç¼–æ’
â”‚
â”œâ”€ æ¨è®º1: é‡‡é›†å±‚â€”â€”æ¥å£æ ‡å‡†åŒ–å®ç°å¤šæºå¹¶è¡Œ
â”‚   â”œâ”€ ContentScraper æ¥å£ç»Ÿä¸€è¾“å‡º ScrapedContent[]
â”‚   â”œâ”€ metadata: Record<string, any> æä¾›å¼€æ”¾å¼æ‰©å±•
â”‚   â””â”€ Twitter é‡‡é›†ç”¨ç¬¬ä¸‰æ–¹ä»£ç† twitterapi.ioï¼ˆå·¥ç¨‹æƒè¡¡ï¼‰
â”‚
â”œâ”€ æ¨è®º2: å¤„ç†å±‚â€”â€”AI åŒå¼•æ“åä½œ
â”‚   â”œâ”€ LLM è¯„åˆ†ï¼š5 ç»´æ ‡å‡†ï¼Œå®ç”¨ä»·å€¼æƒé‡æœ€é«˜ï¼ˆ45/100ï¼‰
â”‚   â”œâ”€ Embedding å»é‡ï¼šå‘é‡åŒ– â†’ ä½™å¼¦ç›¸ä¼¼åº¦ â†’ é˜ˆå€¼è¿‡æ»¤
â”‚   â”œâ”€ LLM æ‘˜è¦ï¼šæ‰©å†™æ¶¦è‰²ï¼ˆéç®€å•æ‘˜è¦ï¼‰ï¼Œè¡¥å……èƒŒæ™¯ä¸Šä¸‹æ–‡
â”‚   â””â”€ Prompt ä¸é€»è¾‘åˆ†ç¦»ï¼Œç‹¬ç«‹ç›®å½•ç®¡ç†
â”‚
â”œâ”€ æ¨è®º3: è¾“å‡ºå±‚â€”â€”æ¸²æŸ“ä¸å‘å¸ƒè§£è€¦
â”‚   â”œâ”€ EJS æ¨¡æ¿ï¼šå¤šå·¥ä½œæµå„è‡ªæ¨¡æ¿ï¼Œè®¾è®¡ä¸é€»è¾‘åˆ†ç¦»
â”‚   â”œâ”€ å‘å¸ƒä¸ºè‰ç¨¿ï¼šå®‰å…¨ç­–ç•¥ï¼Œäººå·¥å®¡æ ¸æœ€åä¸€é“å…³
â”‚   â””â”€ Token ç®¡ç†ï¼š60ç§’é¢„è¿‡æœŸåˆ·æ–°ï¼Œå¾®ä¿¡å¼€å‘æœ€ä½³å®è·µ
â”‚
â”œâ”€ æ¨è®º4: ç¼–æ’å±‚â€”â€”è½»é‡ Workflow æ­¥éª¤é“¾
â”‚   â”œâ”€ addStep() é“¾å¼è°ƒç”¨ï¼Œä¼˜é›…å®šä¹‰æµç¨‹
â”‚   â”œâ”€ å†…ç½®ï¼šé”™è¯¯é‡è¯•ã€è€—æ—¶ç»Ÿè®¡ã€æ­¥éª¤è·³è¿‡
â”‚   â””â”€ "å¤Ÿç”¨å°±å¥½"â€”â€”æœªå¼•å…¥é‡å‹å·¥ä½œæµå¼•æ“
â”‚
â””â”€ æ¨è®º5: åŸºç¡€è®¾æ–½â€”â€”é…ç½® + é€šçŸ¥ + æŒä¹…åŒ–
    â”œâ”€ ConfigManagerï¼šå•ä¾‹ + å¤šæº + ä¼˜å…ˆçº§ + é‡è¯•
    â”œâ”€ INotifier æ¥å£ï¼šBark / é’‰é’‰ / é£ä¹¦å¯æ’æ‹”
    â””â”€ Drizzle + SQLiteï¼šé…ç½®æŒä¹…åŒ–å’Œå‘å¸ƒè®°å½•
```

---

## æ³›åŒ–æ¨¡å¼

| åŸåœºæ™¯ | è¿ç§»åœºæ™¯ | å¦‚ä½•è¿ç§» |
|--------|----------|---------|
| AI è¶‹åŠ¿ â†’ å¾®ä¿¡å…¬ä¼—å· | é‡åŒ–/äº¤æ˜“ä¿¡å· â†’ Telegram/é£ä¹¦ | Scraper æ¢è¡Œæƒ… APIï¼ŒSummarizer æ¢äº¤æ˜“åˆ†æ Prompt |
| Twitter KOL ç›‘æ§ | ç«å“ç›‘æ§ â†’ æ—¥æŠ¥ | Scraper æ¥ç«å“å®˜ç½‘/Product Hunt |
| å¤šæºé‡‡é›† + AI ç­›é€‰ | ä¸ªäººä¿¡æ¯æµ â†’ Newsletter | Scraper æ¥ RSS/HN/Reddit |
| HelloGitHub è¶‹åŠ¿ | æŠ€æœ¯æ ˆé¢„è­¦ | ç›‘æ§ä¾èµ–åº“æ›´æ–°ã€CVE æ¼æ´ |

---

## å¤åˆ»å†³ç­–æŒ‡å—

### è¿è¡Œæ—¶é€‰æ‹©

| é€‰é¡¹ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåœºæ™¯ |
|------|------|------|---------|
| Denoï¼ˆåŸé¡¹ç›®ï¼‰ | TS åŸç”Ÿã€æƒé™å®‰å…¨ | ç”Ÿæ€è¾ƒå° | å…¨æ–°é¡¹ç›® |
| Node.js + TS | ç”Ÿæ€æœ€å¤§ | éœ€é¢å¤–é…ç½® | å·²æœ‰ Node ç»éªŒ |
| **Python** | AI ç”Ÿæ€æœ€å¼ºã€uv ç®¡ç†ä¾¿æ· | ç±»å‹ä¸å¦‚ TS ä¸¥æ ¼ | å·²ç†Ÿæ‚‰ Python |

### æ¨¡å—å¤ç”¨ç­–ç•¥

| æ¨¡å— | ç­–ç•¥ | Python æ–¹æ¡ˆ |
|------|------|------------|
| Scraper æ¥å£æ¨¡å¼ | ç›´æ¥ç…§æ¬ | `Protocol` æˆ– `ABC` |
| ConfigManager | ç›´æ¥ç…§æ¬ | `pydantic-settings` |
| Workflow æ­¥éª¤é“¾ | ç›´æ¥ç…§æ¬ | `class + async/await` |
| Prompt æ¨¡æ¿ | æŒ‰éœ€å®šåˆ¶ | è°ƒæ•´è¯„åˆ†æ ‡å‡†å’Œæ‘˜è¦é£æ ¼ |
| EJS æ¨¡æ¿ | æ›¿æ¢ | Jinja2 |
| å¾®ä¿¡å‘å¸ƒå™¨ | æŒ‰éœ€æ›¿æ¢ | Telegram Bot / é£ä¹¦ / é‚®ä»¶ |

### æ‰©å±•æ–¹å‘

| æ–¹å‘ | åŸé¡¹ç›® | å®šåˆ¶ç©ºé—´ |
|------|--------|---------|
| æ•°æ®æº | Twitter + FireCrawl + HelloGitHub | + RSSã€Redditã€HNã€Product Huntã€å¾®åš |
| AI å¤„ç† | æ’åº + æ‘˜è¦ | + æƒ…æ„Ÿåˆ†æã€è¶‹åŠ¿é¢„æµ‹ã€ä¸ªæ€§åŒ–æ¨è |
| è¾“å‡ºæ¸ é“ | ä»…å¾®ä¿¡å…¬ä¼—å· | + Telegramã€é‚®ä»¶ã€åšå®¢ã€Notion |
| å­˜å‚¨ | SQLite | + å‘é‡æ•°æ®åº“ï¼ˆé•¿æœŸè®°å¿†ï¼‰ |
| è°ƒåº¦ | Cron å®šæ—¶ | + äº‹ä»¶é©±åŠ¨ï¼ˆwebhook è§¦å‘ï¼‰ |

---

## è¡ŒåŠ¨æ¸…å•

### å³æ—¶è¡ŒåŠ¨

- [ ] å…‹éš† `ai-trend-publish` å¹¶æœ¬åœ°è·‘é€šå®Œæ•´å·¥ä½œæµ
- [ ] ä¿®æ”¹ `content-ranker.prompt.ts` ä¸ºè‡ªå·±å…³æ³¨çš„é¢†åŸŸæƒé‡
- [ ] æ›¿æ¢ Twitter KOL åˆ—è¡¨ä¸ºè‡ªå·±å…³æ³¨çš„äºº

### å¤åˆ»è¡ŒåŠ¨

- [ ] Python æ­å»ºé¡¹ç›®éª¨æ¶ï¼šScraper â†’ Ranker â†’ Summarizer â†’ Publisher å››å±‚æ¥å£
- [ ] å®ç°ç¬¬ä¸€ä¸ª Scraperï¼ˆæ¨è RSSï¼Œæœ€ç®€å•ï¼‰
- [ ] å®ç° LLM æ’åºæ¨¡å—ï¼ˆå¤ç”¨ Prompt æ¨¡æ¿ï¼‰
- [ ] å®ç°å‘å¸ƒåˆ°å¸¸ç”¨å¹³å°ï¼ˆTelegram / é£ä¹¦ / é‚®ä»¶ï¼‰
- [ ] æ·»åŠ å®šæ—¶è°ƒåº¦ + Docker éƒ¨ç½²

---

## å…³é”®æ´è§

> **Prompt å°±æ˜¯ä¸šåŠ¡é€»è¾‘**ï¼šé¡¹ç›®æœ€æ ¸å¿ƒçš„"æ™ºèƒ½"ä¸åœ¨ä»£ç é‡Œï¼Œè€Œåœ¨ `prompts/` ç›®å½•ä¸‹çš„å‡ æ®µæ–‡å­—é‡Œã€‚å¤åˆ»æ—¶ï¼ŒPrompt è°ƒä¼˜æ¯”ä»£ç é‡æ„é‡è¦ 10 å€ã€‚

> **è‰ç¨¿è€Œéç›´æ¥å‘å¸ƒ**ï¼šAI ç”Ÿæˆå†…å®¹çš„"æœ€åä¸€è‹±é‡Œ"äº¤ç»™äººå·¥å®¡æ ¸ï¼Œè¿™æ˜¯è´Ÿè´£ä»»çš„å·¥ç¨‹å®è·µã€‚

> **åŒå¼•æ“å»é‡**ï¼šLLM åš"è´¨é‡è¯„ä¼°"ï¼ŒEmbedding åš"é‡å¤æ£€æµ‹"â€”â€”ä¸¤ç§ AI èƒ½åŠ›äº’è¡¥è€Œéæ›¿ä»£ã€‚

> **å¤Ÿç”¨åŸåˆ™**ï¼šè‡ªå»ºè½»é‡ Workflow è€Œéå¼•å…¥ Temporal/n8nï¼Œçº¿æ€§æµæ°´çº¿ä¸éœ€è¦é‡å‹ç¼–æ’å¼•æ“ã€‚

> **60 ç§’é¢„è¿‡æœŸåˆ·æ–°**ï¼šå¾®ä¿¡ Token ç®¡ç†çš„æœ€ä½³å®è·µï¼Œé˜²æ­¢è¯·æ±‚ä¸­é—´è¿‡æœŸã€‚

---

## å»¶ä¼¸é˜…è¯»

- [å¾®ä¿¡å…¬ä¼—å·å¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/)
- [Deno å®˜æ–¹æ–‡æ¡£](https://deno.land/manual)
- [Drizzle ORM](https://orm.drizzle.team/)
- [FireCrawl API](https://firecrawl.dev/)
- [DashScope Embedding](https://help.aliyun.com/document_detail/2712195.html)
- ç±»ä¼¼é¡¹ç›®ï¼š[github-sentinel](https://github.com/DjangoPeng/GitHubSentinel)ï¼ˆGitHub è¶‹åŠ¿ç›‘æ§ï¼‰
