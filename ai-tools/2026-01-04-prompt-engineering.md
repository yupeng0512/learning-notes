# Prompt 工程学习笔记

> 来源：吴恩达教授及前辈们的 Prompt 课程整理
> 整理时间：2026-01-04

---

## 核心洞见

### 1. Prompt 的本质：搜索钥匙而非教科书

**关键认知**：大模型的能力本质上是**搜索**，而非实时学习。

- 模型在预训练阶段已完成海量知识的"记忆"
- Prompt 的作用是**精准唤醒**已有能力，而非"教会"新知识
- 类比：图书馆已有所有书籍，Prompt 是帮你找到正确书架的索引卡

| 错误思维 | 正确思维 |
|---------|---------|
| 我要告诉模型所有背景知识 | 我要用正确的方式"激活"模型已有的能力 |
| Prompt 越长越好 | Prompt 要精准，像钥匙一样匹配锁孔 |

### 2. "思考时间"的本质：Plan-and-Execute 模式

**关键认知**：模型的"思考"本质是**需求拆解 + 上下文整合**。

```
用户模糊需求
    ↓
┌─────────────────────────────────┐
│  Plan 阶段（需求理解与拆解）      │
│  - 解析用户真实意图              │
│  - 识别隐含约束条件              │
│  - 拆分为可执行子任务            │
└─────────────────────────────────┘
    ↓
┌─────────────────────────────────┐
│  Context 整合阶段                │
│  - 补充相关背景知识              │
│  - 扩展必要的上下文              │
│  - 建立任务间的逻辑关联          │
└─────────────────────────────────┘
    ↓
┌─────────────────────────────────┐
│  Execute 阶段（逐步执行）        │
│  - 按拆解后的步骤依次处理        │
│  - 每步结果作为下一步输入        │
└─────────────────────────────────┘
    ↓
精准输出
```

**实践启示**：
- "让我们逐步思考" = 触发 Plan 阶段
- 提供上下文 = 辅助 Context 整合
- 明确步骤 = 规范 Execute 流程

### 3. 任务复杂度决定推理深度

**关键认知**：不同复杂度的任务需要不同的推理策略。

```
任务复杂度评估
│
├── 简单任务（分类、翻译、格式转换）
│   └── 策略：零样本 / 少样本，单次推理即可
│
├── 中等任务（摘要、问答、简单推理）
│   └── 策略：思维链(CoT)，逐步推理
│
└── 复杂任务（多步推理、决策、探索性问题）
    └── 策略：思维树(ToT) / 自我一致性 / ReAct
        - 多路径探索
        - 中间结果评估
        - 回溯与修正
```

**选择指南**：

| 任务特征 | 推荐策略 | 示例 |
|---------|---------|------|
| 答案唯一、规则明确 | 零样本/少样本 | 情感分类、翻译 |
| 需要推理过程 | 思维链 | 数学题、逻辑推理 |
| 多个可能答案 | 自我一致性 | 开放性问题 |
| 需要探索多条路径 | 思维树 | 24点游戏、规划问题 |
| 需要外部信息 | RAG / ReAct | 实时问答、工具调用 |

---

## 知识框架

### Prompt 四要素

| 要素 | 说明 | 示例 |
|------|------|------|
| **指令** | 模型要执行的任务 | "总结以下文本" |
| **上下文** | 外部信息/背景 | 业务规则、领域知识 |
| **输入数据** | 待处理的内容 | 用户问题、文档 |
| **输出指示** | 期望的格式 | JSON、表格、列表 |

### 五大框架速记

| 框架 | 核心要素 | 适用场景 | 记忆口诀 |
|------|----------|---------|---------|
| **RTF** | Role-Task-Format | 日常对话 | 角色做事定格式 |
| **RISEN** | Role-Instructions-Steps-EndGoal-Narrowing | 复杂任务 | 角色指令步骤目标约束 |
| **RODES** | Role-Objective-Details-Examples-SenseCheck | 需要示例 | 角色目标细节示例检查 |
| **思考链** | 末尾加"让我们逐步思考" | 推理任务 | 一句话触发 |
| **密度链** | 递归优化输出 | 总结任务 | 迭代精炼 |

---

## 两大核心原则

### 原则一：编写明确具体的指令

| 策略 | 方法 | 效果 |
|------|------|------|
| **分隔符** | `"""` `'''` `---` `<tag>` | 区分指令与数据 |
| **结构化输出** | 要求 JSON/HTML/表格 | 便于解析处理 |
| **条件检查** | 先验证假设再执行 | 避免无效计算 |
| **少样本提示** | 提供 2-3 个示例 | 学习模式规律 |

### 原则二：给予充足思考时间

| 策略 | 方法 | 效果 |
|------|------|------|
| **明确步骤** | 指定推理流程 | 有条理地处理 |
| **先思考再结论** | 要求先分析再回答 | 避免仓促判断 |

---

## 进阶技术体系

### 技术分类图谱

```
Prompt 技术
│
├── 基础提示
│   ├── 零样本提示 (Zero-Shot)
│   └── 少样本提示 (Few-Shot)
│
├── 推理增强
│   ├── 思维链 (Chain-of-Thought)
│   ├── 自我一致性 (Self-Consistency)
│   └── 思维树 (Tree-of-Thought)
│
├── 知识增强
│   ├── 生成知识提示 (Generated Knowledge)
│   └── 检索增强生成 (RAG)
│
├── 任务分解
│   ├── 链式提示 (Prompt Chaining)
│   └── 程序辅助 (PAL)
│
└── 自动化与迭代
    ├── 自动提示工程师 (APE)
    ├── Active-Prompt
    ├── ReAct 框架
    ├── 自动推理工具 (ART)
    └── 自我反思 (Reflexion)
```

### 技术选择决策树

```
你的任务是什么？
│
├── 简单任务（分类、翻译）
│   └── 零样本 / 少样本
│
├── 需要推理（数学、逻辑）
│   ├── 单次推理 → 思维链(CoT)
│   ├── 需要验证 → 自我一致性
│   └── 复杂探索 → 思维树(ToT)
│
├── 需要外部知识
│   ├── 实时信息 → RAG
│   └── 常识补充 → 生成知识提示
│
├── 复杂多步任务
│   └── 链式提示 / PAL
│
└── 需要执行操作
    ├── 调用工具 → ReAct / ART
    └── 迭代改进 → Reflexion
```

---

## 对抗幻觉策略

| 策略 | 操作方法 | 适用场景 |
|------|----------|----------|
| **引用溯源** | 要求模型先找证据再回答 | 问答、事实核查 |
| **RAG** | 提供可靠的参考文档 | 专业领域问答 |
| **自我一致性** | 多次生成取共识 | 重要决策 |
| **明确边界** | 允许模型说"不知道" | 所有场景 |

---

## 实践清单

### 立即可做
- [ ] 用 RTF 框架（角色-任务-格式）重写最近的一个 Prompt
- [ ] 在复杂问题末尾加上"让我们逐步思考"，对比效果
- [ ] 为格式要求严格的任务添加 2 个示例

### 短期实践
- [ ] 建立个人 Prompt 模板库，收集 3-5 个常用场景模板
- [ ] 实践链式提示，将一个复杂任务拆解为子任务

### 长期提升
- [ ] 学习 RAG 实践，了解如何为大模型外挂知识库
- [ ] 研究 ReAct、Reflexion 等框架的实际应用
- [ ] 关注 APE 等自动化 Prompt 优化技术

---

## 术语速查

| 术语 | 全称 | 一句话解释 |
|------|------|-----------|
| CoT | Chain-of-Thought | 展示推理步骤，提升复杂任务表现 |
| ToT | Tree-of-Thought | 多路径探索，适合复杂决策 |
| RAG | Retrieval-Augmented Generation | 检索+生成，解决知识时效性 |
| ReAct | Reasoning + Acting | 推理与行动交替，支持工具调用 |
| APE | Automatic Prompt Engineer | 自动生成和优化 Prompt |
| PAL | Program-Aided Language | 生成程序解决问题 |

---

## 📝 金句摘录

> "Prompt 的作用是精准唤醒已有能力，而非'教会'新知识。类比：图书馆已有所有书籍，Prompt 是帮你找到正确书架的索引卡。"

> "模型的'思考'本质是需求拆解 + 上下文整合。"

> "'让我们逐步思考' = 触发 Plan 阶段，一句话就能提升复杂任务表现。"

> "不同复杂度的任务需要不同的推理策略——简单任务零样本，复杂任务思维树。"

---

## 个人思考

{留空，供后续补充}

---

## 📚 延伸阅读

- [吴恩达 Prompt Engineering 课程](https://www.deeplearning.ai/short-courses/chatgpt-prompt-engineering-for-developers/) - DeepLearning.AI 官方课程
- [OpenAI Prompt Engineering Guide](https://platform.openai.com/docs/guides/prompt-engineering) - OpenAI 官方指南
- [Anthropic Prompt Engineering](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering) - Anthropic 官方指南
- [Chain-of-Thought 论文](https://arxiv.org/abs/2201.11903) - CoT 原始论文
- [Tree-of-Thought 论文](https://arxiv.org/abs/2305.10601) - ToT 原始论文
- [ReAct 论文](https://arxiv.org/abs/2210.03629) - ReAct 框架论文

---

*最后更新：2026-01-04*
